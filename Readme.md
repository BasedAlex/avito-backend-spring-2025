# Тестовое задание для стажера Backend

  

  

## Описание задачи
На ПВЗ несколько раз в день привозят новые товары, которые были заказаны через Авито. Прежде чем их отдавать заказчику, необходимо сначала проверить и внести информацию в базу. Из-за того, что ПВЗ много, а товаров ещё больше, нужно реализовать механизм, позволяющий в разрезе каждого ПВЗ увидеть, сколько раз в день к ним приезжали товары на приёмку и какие товары были получены.

## Общие вводные

Краткое описание сервиса и его эндпоинтов:
```go
type  Service  interface  {
	// Получение тестового токена
	// (POST /dummyLogin)

	// Авторизация пользователя
	// (POST /login)

	// Добавление товара в текущую приемку (только для сотрудников ПВЗ)
	// (POST /products)
	
	// Получение списка ПВЗ с фильтрацией по дате приемки и пагинацией
	// (GET /pvz)

	// Создание ПВЗ (только для модераторов)
	// (POST /pvz)
	
	// Закрытие последней открытой приемки товаров в рамках ПВЗ
	// (POST /pvz/{pvzId}/close_last_reception)

	// Удаление последнего добавленного товара из текущей приемки (LIFO, только для сотрудников ПВЗ)
	// (POST /pvz/{pvzId}/delete_last_product)

	// Создание новой приемки товаров (только для сотрудников ПВЗ)
	// (POST /receptions)

	// Регистрация пользователя
	// (POST /register)
}
```

## Инструкция по запуску

  

В репозитории находится Taskfile и Makefile для удобства, команды в них работают идентично, буду описывать сценарий запуска через Make.

- Для первого запуска необходимо проинициализировать проект и базу данных через команду `make build`
  
- Затем запустить приложение через команду `make up`

- В дальнейшем работа с приложением ведётся через команды `make up` для старта сервера и `make restart` для рестарта сервера

- для запуска юнит тестов использовать команду `make test`

- для запуска интеграционных тестов `make integration`

 - для запуска генерации `make generate` (данная команда отсутствует в task)
 
 - для запуска теста покрытия `make cover`

Все файлы сгенерированные или необходимые в генерации изначально были добавлены в репозиторий. 

По умолчанию сервер доступен по адресу `http://localhost:8080/`


## Проблемы с которыми столкнулся во время разработки

Для реализации тестового задания я решил использовать своё видение MVC-архитектуры, где в качестве Model выступала база данных, View выступал роутер, сгенерированный из API документации тестового задания, а Controller это service.go 

Одной из проблем было противоречие условий тестового задания документации API, поэтому я руководствовался API.

Также непонятным осталось описание закрытия приёмки 
``"Во всех остальных случаях необходимо обновить данные в хранилище и зафиксировать товары, которые были в рамках этой приёмки."``
Оно кажется излишним, так как данные в базе фиксируются уже фактом того, что приемка была закрыта.

Прочие проблемы разработки не заслуживают упоминания в этом Readme.